import{localRead,localWrite,sessionRead,sessionWrite}from"./ext.js";export const rulesetConfig={version:"",enabledRulesets:[],autoReload:!0,showBlockedCount:!0,strictBlockMode:!0,developerMode:!1};export const process={firstRun:!1,wakeupRun:!1};export async function loadRulesetConfig(){const e=await sessionRead("rulesetConfig");if(e)return rulesetConfig.version=e.version,rulesetConfig.enabledRulesets=e.enabledRulesets,rulesetConfig.autoReload=e.autoReload??!0,rulesetConfig.showBlockedCount=e.showBlockedCount??!0,rulesetConfig.strictBlockMode=e.strictBlockMode??!0,rulesetConfig.developerMode=e.developerMode??!1,void(process.wakeupRun=!0);const o=await localRead("rulesetConfig");if(o)return rulesetConfig.version=o.version,rulesetConfig.enabledRulesets=o.enabledRulesets,rulesetConfig.autoReload=o.autoReload??!0,rulesetConfig.showBlockedCount=o.showBlockedCount??!0,rulesetConfig.strictBlockMode=o.strictBlockMode??!0,rulesetConfig.developerMode=o.developerMode??!1,void sessionWrite("rulesetConfig",rulesetConfig);sessionWrite("rulesetConfig",rulesetConfig),localWrite("rulesetConfig",rulesetConfig),process.firstRun=!0}export async function saveRulesetConfig(){return sessionWrite("rulesetConfig",rulesetConfig),localWrite("rulesetConfig",rulesetConfig)}